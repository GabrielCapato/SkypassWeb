---
description: 
globs: 
alwaysApply: true
---
# ğŸ“˜ Next.js Clean Code Rules

Um guia prÃ¡tico para manter um projeto Next.js limpo, consistente e escalÃ¡vel.

---

## ğŸ“ 1. Estrutura de Pastas

- Use `app/` para rotas com App Router (Next 13+).
- Use `src/` para todo cÃ³digo da aplicaÃ§Ã£o (ex: `src/app`, `src/components`, etc).
- Mantenha a estrutura modular e funcional:

```
src/
â”‚
â”œâ”€â”€ app/               # Rotas da aplicaÃ§Ã£o
â”‚   â””â”€â”€ dashboard/
â”‚       â””â”€â”€ page.tsx   # PÃ¡gina da rota
â”‚       â””â”€â”€ layout.tsx # Layout da rota
â”‚
â”œâ”€â”€ components/        # Componentes reutilizÃ¡veis
â”‚   â””â”€â”€ Button.tsx
â”‚   â””â”€â”€ Header.tsx
â”‚
â”œâ”€â”€ features/          # DomÃ­nios da aplicaÃ§Ã£o (DDD)
â”‚   â””â”€â”€ auth/
â”‚       â”œâ”€â”€ components/
â”‚       â”œâ”€â”€ services/
â”‚       â”œâ”€â”€ types.ts
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ lib/               # Helpers, utils e configs
â”œâ”€â”€ hooks/             # Custom React Hooks
â”œâ”€â”€ services/          # ComunicaÃ§Ã£o com APIs
â”œâ”€â”€ store/             # Zustand, Redux ou Context
â”œâ”€â”€ types/             # Tipagens globais
â”œâ”€â”€ styles/            # Estilos globais e variÃ¡veis
â”œâ”€â”€ constants/         # Constantes usadas no projeto
```

---

## ğŸ§± 2. Componentes

- Componentes devem ser pequenos e focados em uma Ãºnica responsabilidade.
- Separe lÃ³gica (hooks) de visual (UI).
- Use `PascalCase` para nomes de componentes.
- Prefira componentes funcionais com hooks.

```tsx
// Ruim
function LoginComponent() {
  // muito cÃ³digo
}

// Bom
function LoginForm() {
  return <form>{/* ... */}</form>;
}
```

---

## ğŸŒ 3. PÃ¡ginas e Rotas

- Use pastas com `page.tsx` para rotas (App Router).
- Coloque arquivos `layout.tsx` onde for necessÃ¡rio layout persistente.
- Nomeie rotas dinamicamente com `[param]`.

```bash
/app/products/[id]/page.tsx
```

---

## ğŸ§ª 4. FunÃ§Ãµes

- Uma funÃ§Ã£o = uma responsabilidade.
- Use nomes descritivos (nÃ£o use `doSomething()`).
- Tipagem explÃ­cita sempre (`: string`, `: number`, etc).

```ts
// Ruim
function handle() {}

function getData(a: any) {
  return a;
}

// Bom
function handleLoginSubmit(formData: LoginFormData): Promise<void> {}

function getUserById(userId: string): User | null {}
```

---

## ğŸ·ï¸ 5. Tipagens (TypeScript)

- Sempre tipar funÃ§Ãµes, props e retornos.
- Centralize tipagens em `types/` ou `features/x/types.ts`.
- Use interfaces para objetos e tipos para aliases.

```ts
// PreferÃ­vel
interface User {
  id: string;
  name: string;
}

// AceitÃ¡vel
type UserRole = 'admin' | 'editor' | 'viewer';
```

---

## â™»ï¸ 6. ReutilizaÃ§Ã£o

- Crie componentes reutilizÃ¡veis em `/components`.
- Use hooks para lÃ³gica de negÃ³cio (em `/hooks` ou `/features/x/hooks.ts`).
- Use serviÃ§os para comunicaÃ§Ãµes com APIs.

---

## ğŸ› ï¸ 7. Services/API

- Use `axios` ou `fetch` com wrappers.
- Centralize chamadas HTTP em `/services`.
- Nunca use chamadas diretas a API dentro de componentes.

```ts
// /services/userService.ts
export async function fetchUsers(): Promise<User[]> {
  const res = await fetch('/api/users');
  return res.json();
}
```

---

## ğŸ“¦ 8. Imports

- Use paths absolutos (configure `tsconfig.json`).
- Agrupe imports: libs externas, internas, relativas, estilos.

```ts
// Bom
import { useEffect } from 'react';
import { fetchUsers } from '@/services/userService';
import { Button } from '@/components/Button';
import './styles.css';
```

---

## ğŸ”’ 9. SeguranÃ§a

- Nunca exponha tokens ou segredos no client.
- Use `.env.local` para variÃ¡veis sensÃ­veis.
- Valide dados no backend sempre.

---

## ğŸ“„ 10. Nomenclatura

| Tipo         | ConvenÃ§Ã£o    | Exemplo            |
|--------------|--------------|--------------------|
| Componentes  | PascalCase   | `UserCard.tsx`     |
| FunÃ§Ãµes      | camelCase    | `handleSubmit()`   |
| VariÃ¡veis    | camelCase    | `userList`         |
| Pastas       | kebab-case   | `user-profile/`    |
| Tipos        | PascalCase   | `UserData`         |
| Constantes   | UPPER_CASE   | `MAX_RETRIES`      |

---

## âœ… 11. Boas PrÃ¡ticas Gerais

- Nunca deixe `console.log` em produÃ§Ã£o.
- Use ESLint + Prettier para manter o cÃ³digo padronizado.
- Comente apenas o que nÃ£o Ã© Ã³bvio.
- Use mensagens claras em commits.
- Prefira `async/await` no lugar de `.then()`.

---

## ğŸ§ª 12. Testes

- Use `jest`, `testing-library/react` e `msw` para mocks.
- Crie arquivos `*.test.tsx` prÃ³ximos ao componente.
- Teste lÃ³gica crÃ­tica e comportamento visÃ­vel.

---

## ğŸ§¼ 13. Clean Imports

Configure `tsconfig.json`:

```json
{
  "compilerOptions": {
    "baseUrl": "./src",
    "paths": {
      "@/*": ["*"]
    }
  }
}
```

---

## ğŸ“‚ 14. Arquivos Especiais

- `.env.local`: variÃ¡veis sensÃ­veis.
- `.eslint.json`: regras de lint.
- `.prettierrc`: formataÃ§Ã£o.
- `README.md`: documentaÃ§Ã£o inicial.
- `.gitignore`: arquivos ignorados pelo git.

---

## ğŸ“š 15. DocumentaÃ§Ã£o

- Documente os mÃ³dulos complexos com comentÃ¡rios de **bloco**.
- Mantenha README atualizado.
- Use JSDoc para explicar funÃ§Ãµes reutilizÃ¡veis.

```ts
/**
 * Retorna o usuÃ¡rio logado pelo ID
 * @param userId - ID do usuÃ¡rio
 * @returns Objeto User
 */
function getUserById(userId: string): User {}
```

---

## ğŸ”š Fim


Siga este guia para manter seu projeto organizado, profissional e fÃ¡cil de escalar. ğŸš€